<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
    <div class="flex justify-end mb-4">
        <button [disabled]="loadingData()" (click)="refresh()"
            class="bg-gray-800 hover:bg-gray-700 text-gray-300 py-2 px-4 rounded-lg transition-colors">
            {{loadingData() ? 'Cargando...' : 'Refrescar'}}
        </button>
    </div>
    <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
            <tr>
                <th scope="col" class="px-6 py-3">
                    Número Orden
                </th>
                <th scope="col" class="px-6 py-3">
                    Número platos
                </th>
                <th scope="col" class="px-6 py-3">
                    Platos
                </th>
                <th scope="col" class="px-6 py-3">
                    Estado
                </th>
                <th scope="col" class="px-6 py-3">
                    Fecha
                </th>

            </tr>
        </thead>
        <tbody>
            @for (i of ordersHistory(); track $index) {
            <tr
                class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700 border-gray-200">
                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                    #{{i.id}}
                </th>
                <td class="px-6 py-4">
                    {{i.listRecipes.length}}
                </td>
                <td class="px-2 py-2 align-top w-full flex flex-wrap gap-2 flex-row">
                    @for (r of i.listRecipes; track $index) {
                        <ul class="w-50 list-none pl-4">
                            <strong class="text-xs">{{ r.name }}</strong>
                            @for (ing of r.ingredients; track $index) {
                            <li class="text-xs text-gray-600">
                                - {{ ing.ingredientName }} / {{ ing.quantity }} und.
                            </li>
                            }
                        </ul>
                    }
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    {{i.status | statusIcon}}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">
                    {{ i.createdAt | date: 'yyyy-MM-dd h:mm a' }}
                  </td>
                  
            </tr>
            }
            @empty {
            @if (!loadingData()) {
            <tr>
                <td colspan="4" class="text-center py-4">
                    No hay historial disponible
                </td>
            </tr>
            }
            }
            @if (loadingData()) {
            <tr>
                <td colspan="4" class="text-center py-4">
                    Cargando órdenes...
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>